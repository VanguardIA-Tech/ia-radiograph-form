server {
    # O servidor vai escutar na porta 80.
    listen 80;
    server_name localhost;

    # Define o diretório raiz onde os arquivos do site estão localizados.
    root /usr/share/nginx/html;

    # Redireciona permanentemente qualquer acesso à raiz ("/") para o subcaminho "/form".
    location = / {
        return 301 /form/;
    }

    # Configuração principal para o subcaminho /form.
    location /form/ {
        # Esta é a mágica para Single-Page Applications (SPA):
        # 1. Tenta encontrar o arquivo exato que o navegador pediu ($uri).
        # 2. Se não encontrar, tenta ver se é um diretório ($uri/).
        # 3. Se falhar novamente, em vez de dar um erro 404, ele serve o
        #    arquivo /form/index.html. Isso entrega o controle para o React Router
        #    que vai exibir a página correta do lado do cliente.
        try_files $uri $uri/ /form/index.html;
    }

    # Opcional: Melhora o cache para arquivos estáticos como CSS, JS e imagens.
    location ~* \.(?:css|js|ico|gif|jpe?g|png|svg|webp)$ {
        expires 1y;
        add_header Cache-Control "public";
        access_log off;
    }
}